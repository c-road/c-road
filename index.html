<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C*-road</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ress@4.0.0/dist/ress.min.css">
    <link rel="stylesheet" href="./style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=BioRhyme:wght@200;800&family=Noto+Serif+JP:wght@200&display=swap"
        rel="stylesheet">
</head>

<body>
    <div id="title">
        <p>C*-road</p>
    </div>
    <div id="container">
        <canvas id="game-board" width="520px" height="520px"></canvas>
    </div>
    <div id="modalArea" class="modalArea showModal">
        <!-- <div id="modalArea" class="modalArea"> -->
        <div class="modalBackground"></div>
        <div class="modalWrapper">
            <div class="modal">
                <div class="modal_title">
                    <div class="modal_main-title">C*-road</div>
                    <div class="modal_sub-title">～数字で広がる無限のマス目～</div>
                </div>
                <div class="modal_gameStart">
                    <div class="modal_gameStart-button" id="human">スタート</div>
                    <!-- <div class="modal_gameStart-button" id="computer">ランダムなCPU</div> -->
                </div>
                <div class="modal_how-to-play">
                    <div class="modal_how-to-play-button">ゲームのルール</div>
                    <!-- <div class="modal_how-to-play-button">Movie</div> -->
                </div>
                <div class="modal_share">
                    <!-- <div class="model_share-title"> 共有する</div> -->
                    <div class="modal_share-button-container">
                        <div class="modal_share-button"><a
                                href="http://twitter.com/share?url=https://c-road.github.io&text=C*-road&hashtags=croad"
                                target="_blank" rel="nofollow noopener noreferrer">Tweetする</a>
                        </div>
                        <div class="modal_share-button">
                            <a href="https://social-plugins.line.me/lineit/share?url=https://c-road.github.io/"
                                target="_blank" rel="nofollow noopener noreferrer">LINEで送る</a>
                        </div>
                    </div>
                </div>
                <div class="modal_github-url">
                    <a href="https://github.com/c-road/c-road.github.io">https://github.com/c-road/c-road.github.io</a>
                </div>
            </div>
        </div>
    </div>
    </div>
    <div id="winnerWindow" class="winnerWindow">
        <div id="winner"></div>
        <div id="restartButton" class="restartButton">restart</div>
    </div>

    <div id="computer"></div>
    <script src="./js/main.js"></script>
    <script src="./js/game.js"></script>
    <script src="./js/rendering.js"></script>
    <script>
        function resizeWindow() {
            let w = document.getElementById("container").width;
            console.log("width " + w);
            document.getElementById("game-board").setAttribute("width", w);
        }

        // window.onresize = resizeWindow;
        // window.onload = resizeWindow;
        function clickGameButton(type) {
            const context = document.getElementById("game-board").getContext('2d');
            gameStart(context, type);
            console.log(type + "geme");
        }

        function demoGame() {
            const context = document.getElementById("game-board").getContext('2d');
            gameStart(context, "demo");
            console.log("demoGame");
        }
        // 参考 https://myscreate.com/modal-without-jquery/
        const modalArea = document.getElementById('modalArea');
        const computer = document.getElementById('computer');
        const human = document.getElementById('human');
        const modalBackground = document.getElementById('modalBackground');
        const restartButton = document.getElementById('restartButton');

        computer.addEventListener('click', function () {
            modalArea.classList.toggle('showModal');
            clickGameButton("computer");
        }, false);

        human.addEventListener('click', function () {
            modalArea.classList.toggle('showModal');
            clickGameButton("human");
        }, false);

        restartButton.addEventListener('click', function () {
            modalArea.classList.toggle('showModal');
            document.getElementById('winner').setAttribute('class', "winner");
            document.getElementById('winnerWindow').setAttribute('class', "winnerWindow");
            demoGame();
        }, false);
        demoGame();
    </script>
</body>

</html>